# Agent Guidelines for this Repository

This repository is a Bun-based monorepo containing packages (in `packages/`) and applications (in `apps/`). The main framework is `bklar`.

## Build, Lint, and Test Commands

This project uses `bun` for package management, testing, and building.

- **Install Dependencies**: `bun install`
- **Build**: `bun run build` (typically runs `bunchee` in packages)
- **Test**: `bun test`
  - To run a single test file: `bun test <path-to-file>`
  - Example: `bun test packages/bklar/src/tests/core.test.ts`
- **Dev Server** (for apps): `bun run dev`

## Code Style & Conventions

### General
- **Runtime**: Code targets the [Bun](https://bun.sh) runtime. Use Bun-native APIs (e.g., `Bun.serve`, `Bun.file`) where appropriate instead of Node.js polyfills unless necessary.
- **Language**: TypeScript throughout.
- **Indentation**: 2 spaces.
- **Quotes**: Double quotes (`"`) for strings and imports.
- **Semicolons**: Always use semicolons.

### Imports & Exports
- **Type Imports**: Always use explicit type-only imports for types to aid transpilation/bundling.
  ```typescript
  import { type Server } from "bun";
  import type { Request, Response } from "./types";
  ```
- **File Structure**:
  - Source code resides in `src/`.
  - Tests are typically located in `src/tests/` or collocated with source (check specific package conventions).
  - Main entry point is usually `src/index.ts`.

### Naming Conventions
- **Classes**: PascalCase (e.g., `BklarApp`, `Router`).
- **Functions/Methods**: camelCase (e.g., `listen`, `handleRequest`).
- **Variables**: camelCase.
- **Files**: camelCase or kebab-case (consistency within directory).
- **Directories**: kebab-case.

### Error Handling
- Use `try/catch` blocks for async operations that might fail.
- For the framework `bklar`, there is a dedicated `onError` hook and error handling mechanism. Respect established patterns when modifying core logic.

### Types
- Use strict typing. Avoid `any` whenever possible.
- Define interfaces/types in `types.ts` or distinct files if they are shared.
- Generics are heavily used in the framework (e.g., `<S extends Schemas>`); preserve them to maintain type safety.

## Monorepo Structure
- **apps/**: End-user applications or examples (e.g., `example-api`).
- **packages/**: Shared libraries and the core framework.
  - `packages/bklar`: The main framework package.
  - `packages/cors`, `packages/jwt`, etc.: Middleware/plugin packages.

## Specific AI Rules

### Cursor / Copilot
*No specific rules found in .cursorrules or .github/copilot-instructions.md.*

---
*Generated by opencode on Sat Jan 10 2026*
